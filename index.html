<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>TOEIC 800 Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #222;
      background: #f5f5f7;
    }
    body {
      margin: 0;
      padding: 0;
      background: #f5f5f7;
    }
    .app {
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
    }
    h1 {
      font-size: 1.4rem;
      margin: 0 0 8px;
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      margin-right: 4px;
      background: #e6f0ff;
      color: #2457c6;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
      padding: 12px 14px;
      margin-bottom: 12px;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }
    select, input[type="number"] {
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid #d0d0e0;
      font-size: 14px;
      background: #fff;
    }
    button {
      border-radius: 999px;
      border: none;
      padding: 8px 14px;
      font-size: 14px;
      cursor: pointer;
    }
    .primary {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      color: #fff;
    }
    .secondary {
      background: #eef1ff;
      color: #334155;
    }
    .question {
      margin-bottom: 10px;
    }
    .q-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      margin-bottom: 4px;
    }
    .q-context-toggle {
      font-size: 12px;
      color: #2563eb;
      text-decoration: underline;
      cursor: pointer;
    }
    .q-context {
      font-size: 13px;
      background: #f9fafb;
      border-radius: 8px;
      padding: 8px;
      margin-bottom: 6px;
      white-space: pre-wrap;
      line-height: 1.4;
    }
    .options label {
      display: block;
      font-size: 14px;
      padding: 4px 0;
    }
    .options input {
      margin-right: 6px;
    }
    .analysis {
      font-size: 13px;
      margin-top: 4px;
      border-top: 1px dashed #e2e8f0;
      padding-top: 4px;
    }
    .analysis.correct { color: #15803d; }
    .analysis.wrong { color: #b91c1c; }
    .stats-row {
      font-size: 13px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      margin-top: 4px;
    }
    .stats-row span {
      white-space: nowrap;
    }
    .history-item {
      font-size: 13px;
      border-bottom: 1px dashed #e5e7eb;
      padding: 6px 0;
    }
    .pill {
      padding: 2px 8px;
      border-radius: 999px;
      background: #f1f5f9;
      font-size: 11px;
      margin-right: 4px;
    }
    @media (max-width: 600px) {
      .controls { flex-direction: column; align-items: stretch; }
      button, select, input[type="number"] { width: 100%; }
      .q-header { flex-direction: column; align-items: flex-start; gap: 2px; }
    }
  </style>
</head>
<body>
<div class="app">
  <div class="card">
    <h1>TOEIC 800 Trainerï¼ˆè‡ªæµ‹ç½‘é¡µï¼‰</h1>
    <div style="font-size:13px;color:#64748b;margin-bottom:6px;">
      ğŸ¯ ç›®æ ‡ï¼šå†² <strong>800+</strong> Â· æ ¹æ®ç›®å‰æ°´å¹³ï¼ˆçº¦ 700ï¼Œè¯æ±‡/é€Ÿåº¦/è¯­æ³•åŸºç¡€ä¸è¶³ï¼Œæ¯å¤©çº¦ 1 å°æ—¶ï¼‰è®¾è®¡  
      é¢˜å‹å‚è€ƒ TOEIC çœŸé¢˜é£æ ¼ï¼Œä½†é¢˜ç›®ä¸ºè‡ªåˆ¶ã€éçœŸé¢˜åŸæ–‡ã€‚
    </div>
    <div class="controls">
      <div>
        <span class="badge">æ¨¡å¼</span>
        <select id="modeSelect">
          <option value="mixed">ç»¼åˆè®­ç»ƒï¼ˆæ‰€æœ‰éƒ¨åˆ†ï¼‰</option>
          <option value="grammar">è¯­æ³•ãƒ»Part5 å¼ºåŒ–</option>
          <option value="reading">é˜…è¯»ãƒ»Part6 & 7</option>
          <option value="vocab">è¯æ±‡å·©å›º</option>
          <option value="listeningStyle">Listening-style è¯­æ„Ÿ</option>
        </select>
      </div>
      <div>
        <span class="badge">é¢˜é‡</span>
        <input id="countInput" type="number" min="3" max="30" value="4" />
      </div>
      <button class="primary" id="startBtn">ğŸ¯ æŠ½é¢˜å¼€å§‹</button>
      <button class="secondary" id="clearBtn">æ¸…ç©ºå½“å‰ä½œç­”</button>
    </div>
    <div style="font-size:13px;">
      è®¡æ—¶ï¼š<span id="timer">00:00</span> Â· å½“å‰å¹³å‡æ¯é¢˜ç”¨æ—¶ï¼š<span id="avgTime">--</span> ç§’
    </div>
  </div>

  <div id="questionsContainer"></div>

  <div class="card" id="analysisCard" style="display:none;">
    <h2 style="font-size:1.1rem;margin:0 0 6px;">æœ¬æ¬¡è®­ç»ƒç»“æœ</h2>
    <div id="summaryText" style="font-size:13px;margin-bottom:4px;"></div>
    <div id="detailStats" class="stats-row"></div>
    <div id="advice" style="font-size:13px;margin-top:6px;color:#0f172a;"></div>
  </div>

  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h2 style="font-size:1rem;margin:0;">å†å²è®°å½•ï¼ˆä¿å­˜åœ¨æœ¬æœºï¼‰</h2>
      <button class="secondary" id="toggleHistory">æ˜¾ç¤º/éšè—</button>
    </div>
    <div id="historyList" style="display:none;margin-top:6px;"></div>
  </div>
</div>

<script>
/**
 * é¢˜åº“è¯´æ˜ï¼š
 * - context: é˜…è¯»/é€šçŸ¥/å¯¹è¯åŸæ–‡ï¼Œæ˜¾ç¤ºåœ¨é¢˜ç›®å‰é¢ï¼Œå¯ä»¥æŠ˜å 
 * - question: é¢˜å¹²
 * - options: é€‰é¡¹
 * - answer: æ­£ç¡®ç­”æ¡ˆå­—æ¯
 * - part: TOEIC éƒ¨åˆ†ï¼ˆ5 / 6 / 7 / Lï¼‰
 * - skills: ç›¸å…³èƒ½åŠ›æ ‡ç­¾ï¼Œç”¨äºç»Ÿè®¡åˆ†æ
 *   ä¾‹å¦‚ ["Grammar","Vocabulary","Reading","ListeningStyle"]
 */

const QUESTION_BANK = [
  {
    id: 1,
    part: 7,
    type: "Reading: Inference",
    contextTitle: "Notice: Customer-Service Workshop",
    context: 
`To: All employees

We will hold a customer-service workshop on Thursday, April 3,
from 7:00 p.m. to 8:30 p.m. in Training Room 2.

The session is free for all employees. No registration is required.`,
    question: "What can be inferred about the workshop from the notice?",
    options: {
      A: "It is only for new employees.",
      B: "It will be held after business hours.",
      C: "Participants must register in advance.",
      D: "It is free for the general public."
    },
    answer: "B",
    explanation: "æ—¶é—´ 7:00 p.m.â€“8:30 p.m.ï¼Œåœ¨æ­£å¸¸ä¸‹ç­æ—¶é—´ä¹‹å â‡’ after business hoursã€‚Aï¼šæ²¡æœ‰åªé™æ–°å‘˜å·¥ï¼›Cï¼šæ–‡ä¸­è¯´ no registration is requiredï¼›Dï¼šfree for all employeesï¼Œå¹¶éå‘å…¬ä¼—å¼€æ”¾ã€‚",
    skills: ["Reading","Inference","Vocabulary"]
  },
  {
    id: 2,
    part: "L",
    type: "Listening-style: Intonation / Attitude",
    contextTitle: "Spoken line",
    context: `A man says to his coworker: 
"Well, that's one way to look at it."`,
    question: "How does the man probably feel when he says, â€œWell, thatâ€™s one way to look at itâ€?",
    options: {
      A: "He completely agrees.",
      B: "He politely disagrees.",
      C: "He is confused.",
      D: "He is very angry."
    },
    answer: "B",
    explanation: "è‹±è¯­å£è¯­ä¸­ â€œWell, thatâ€™s one way to look at it.â€ é€šå¸¸æ˜¯ã€Œå§”å©‰ä¸åŒæ„ã€çš„æ€åº¦ï¼Œè¯­æ°”è¾ƒè½¯ï¼Œä¸æ˜¯å®Œå…¨åŒæ„ä¹Ÿä¸æ˜¯æ„¤æ€’ã€‚",
    skills: ["ListeningStyle","Pragmatics"]
  },
  {
    id: 3,
    part: 5,
    type: "Grammar: Part 5",
    context: "",
    question: "The new product launch has been ______ until the marketing team finishes the survey.",
    options: {
      A: "postponed",
      B: "postponing",
      C: "postpone",
      D: "to postponing"
    },
    answer: "A",
    explanation: "åŠ¨è¯çŸ­è¯­ â€œhas been + è¿‡å»åˆ†è¯â€ â‡’ has been postponedï¼ˆè¢«åŠ¨è¯­æ€ï¼‰ã€‚",
    skills: ["Grammar"]
  },
  {
    id: 4,
    part: 6,
    type: "Reading: Part 6 æ–‡æ®µå¡«ç©º",
    contextTitle: "E-mail from HR",
    context:
`Dear staff,

As part of our wellness program, we will introduce flexible starting times next month.
You may arrive between 8:00 and 10:00 a.m., as long as you work eight hours a day.
This change is intended to help employees avoid rush-hour traffic and reduce stress.

If you have any questions, please contact the HR office.

Best regards,
Human Resources`,
    question: "This change is intended to help employees avoid ______ traffic and reduce stress.",
    options: {
      A: "occasional",
      B: "rush-hour",
      C: "temporary",
      D: "light"
    },
    answer: "B",
    explanation: "æ ¹æ®è¯­å¢ƒï¼šå¼¹æ€§ä¸Šç­æ—¶é—´çš„ç›®çš„å°±æ˜¯é¿å…é«˜å³°æœŸäº¤é€š â‡’ rush-hour trafficã€‚",
    skills: ["Reading","Vocabulary","Collocation"]
  }
];

// ========== çŠ¶æ€ ==========
let currentQuestions = [];
let userAnswers = {};
let timerInterval = null;
let startTime = null;

// ========== å·¥å…·å‡½æ•° ==========
function shuffle(array) {
  const arr = array.slice();
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function pickQuestions(mode, count) {
  let pool = QUESTION_BANK;
  if (mode === "grammar") {
    pool = QUESTION_BANK.filter(q => q.part === 5);
  } else if (mode === "reading") {
    pool = QUESTION_BANK.filter(q => q.part === 6 || q.part === 7);
  } else if (mode === "vocab") {
    pool = QUESTION_BANK.filter(q => q.skills.includes("Vocabulary"));
  } else if (mode === "listeningStyle") {
    pool = QUESTION_BANK.filter(q => q.part === "L");
  }
  if (pool.length === 0) return [];
  return shuffle(pool).slice(0, Math.min(count, pool.length));
}

// ========== æ¸²æŸ“é¢˜ç›® ==========
function renderQuestions() {
  const container = document.getElementById("questionsContainer");
  container.innerHTML = "";
  document.getElementById("analysisCard").style.display = "none";

  currentQuestions.forEach((q, idx) => {
    const card = document.createElement("div");
    card.className = "card question";

    const header = document.createElement("div");
    header.className = "q-header";
    header.innerHTML = `
      <div>
        <span class="badge">#${idx + 1} Â· Part${q.part}</span>
        <span style="font-size:12px;color:#64748b;">${q.type}</span>
      </div>
      ${q.context ? '<span class="q-context-toggle" data-qid="'+q.id+'">æ˜¾ç¤º/éšè—é¢˜å¹²</span>' : ""}
    `;
    card.appendChild(header);

    if (q.context) {
      const ctx = document.createElement("div");
      ctx.className = "q-context";
      ctx.dataset.qid = q.id;
      ctx.textContent = q.context;
      card.appendChild(ctx);
    }

    const qText = document.createElement("div");
    qText.style.fontSize = "14px";
    qText.style.margin = "4px 0 6px";
    qText.textContent = q.question;
    card.appendChild(qText);

    const opts = document.createElement("div");
    opts.className = "options";
    for (const key of ["A","B","C","D"]) {
      if (!q.options[key]) continue;
      const label = document.createElement("label");
      label.innerHTML = `
        <input type="radio" name="q_${q.id}" value="${key}">
        (${key}) ${q.options[key]}
      `;
      opts.appendChild(label);
    }
    card.appendChild(opts);

    const analysis = document.createElement("div");
    analysis.id = "analysis_" + q.id;
    analysis.className = "analysis";
    analysis.style.display = "none";
    card.appendChild(analysis);

    container.appendChild(card);
  });

  // ç»‘å®š context toggle
  container.addEventListener("click", function handler(e) {
    const toggle = e.target.closest(".q-context-toggle");
    if (toggle) {
      const qid = toggle.dataset.qid;
      const ctx = container.querySelector('.q-context[data-qid="'+qid+'"]');
      if (ctx) {
        ctx.style.display = ctx.style.display === "none" ? "block" : "none";
      }
    }
  }, { once: true });
}

// ========== è®¡æ—¶ ==========
function startTimer() {
  startTime = Date.now();
  const timerEl = document.getElementById("timer");
  const avgEl = document.getElementById("avgTime");
  timerEl.textContent = "00:00";
  avgEl.textContent = "--";
  if (timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    const m = String(Math.floor(elapsed / 60)).padStart(2, "0");
    const s = String(elapsed % 60).padStart(2, "0");
    timerEl.textContent = `${m}:${s}`;
    if (currentQuestions.length > 0) {
      avgEl.textContent = (elapsed / currentQuestions.length).toFixed(1);
    }
  }, 1000);
}

// ========== è¯„åˆ†ä¸åˆ†æ ==========
function grade() {
  if (!currentQuestions.length) return;

  const elapsedSec = Math.floor((Date.now() - startTime) / 1000);
  if (timerInterval) clearInterval(timerInterval);

  let correct = 0;
  let grammarWrong = 0, readingWrong = 0, vocabWrong = 0, listeningWrong = 0;

  currentQuestions.forEach(q => {
    const chosen = document.querySelector(`input[name="q_${q.id}"]:checked`);
    const ans = chosen ? chosen.value : null;
    const analysis = document.getElementById("analysis_" + q.id);
    if (!analysis) return;
    analysis.style.display = "block";
    if (ans === q.answer) {
      correct++;
      analysis.className = "analysis correct";
      analysis.textContent = `âœ” æ­£ç¡®ã€‚è§£æï¼š${q.explanation}`;
    } else {
      analysis.className = "analysis wrong";
      analysis.textContent = `âœ˜ é”™è¯¯ã€‚ä½ çš„ç­”æ¡ˆï¼š${ans || "æœªä½œç­”"}ï¼›æ­£ç¡®ç­”æ¡ˆï¼š${q.answer}ã€‚è§£æï¼š${q.explanation}`;
      if (q.skills.includes("Grammar")) grammarWrong++;
      if (q.skills.includes("Reading")) readingWrong++;
      if (q.skills.includes("Vocabulary")) vocabWrong++;
      if (q.skills.includes("ListeningStyle")) listeningWrong++;
    }
  });

  const total = currentQuestions.length;
  const accuracy = (correct / total * 100).toFixed(1);
  const avgTime = (elapsedSec / total).toFixed(1);

  document.getElementById("timer").textContent =
    `${String(Math.floor(elapsedSec / 60)).padStart(2,"0")}:${String(elapsedSec % 60).padStart(2,"0")}`;
  document.getElementById("avgTime").textContent = avgTime;

  const summaryEl = document.getElementById("summaryText");
  summaryEl.textContent = `å…± ${total} é¢˜ï¼Œç­”å¯¹ ${correct} é¢˜ï¼Œæ­£ç¡®ç‡ ${accuracy}% ã€‚æ€»ç”¨æ—¶ ${elapsedSec} ç§’ï¼Œå¹³å‡æ¯é¢˜ ${avgTime} ç§’ã€‚`;

  const statsEl = document.getElementById("detailStats");
  statsEl.innerHTML = "";
  if (grammarWrong + readingWrong + vocabWrong + listeningWrong === 0) {
    statsEl.textContent = "æœ¬æ¬¡æ‰€æœ‰é¢˜éƒ½åšå¯¹äº†ï¼Œç»§ç»­ä¿æŒï¼Œå¯ä»¥é€‚å½“å¢åŠ é¢˜é‡æˆ–æé«˜é€Ÿåº¦ã€‚";
  } else {
    if (grammarWrong) statsEl.innerHTML += `<span>è¯­æ³•é”™é¢˜ï¼š${grammarWrong}</span>`;
    if (readingWrong) statsEl.innerHTML += `<span>é˜…è¯»é”™é¢˜ï¼š${readingWrong}</span>`;
    if (vocabWrong) statsEl.innerHTML += `<span>è¯æ±‡/æ­é…é”™é¢˜ï¼š${vocabWrong}</span>`;
    if (listeningWrong) statsEl.innerHTML += `<span>Listening-style è¯­æ„Ÿé”™é¢˜ï¼š${listeningWrong}</span>`;
  }

  // å»ºè®®
  const adviceEl = document.getElementById("advice");
  let advice = "";
  if (readingWrong > 0) {
    advice += "ğŸ“š é˜…è¯»ï¼šå»ºè®®æ¯å¤©è‡³å°‘åš 1 å°æ®µ Part6/7ï¼Œå…ˆçœ‹é¢˜å¹²â†’å†è¯»æ–‡ç« ï¼Œç»ƒä¹ å¿«é€ŸæŠ“å…³é”®ä¿¡æ¯ã€‚\n";
  }
  if (grammarWrong > 0) {
    advice += "ğŸ“ è¯­æ³•ï¼šæŠŠæœ¬æ¬¡é”™é¢˜çš„å¥å­æŠ„ä¸‹æ¥ï¼ŒæŒ‰æ—¶æ€/å¥å‹åˆ†ç±»å¤ä¹ ï¼ŒåŒç±»ç»“æ„å†åš 3ï½5 é¢˜ã€‚\n";
  }
  if (vocabWrong > 0) {
    advice += "ğŸ§  è¯æ±‡ï¼šæŠŠé”™è¯åŠ å…¥ä½ è‡ªå·±çš„å•è¯æœ¬ï¼Œè¿åŒä¾‹å¥ä¸€èµ·è®°ï¼Œç¬¬äºŒå¤©+ä¸€å‘¨åå†å¤ä¹ ä¸€æ¬¡ã€‚\n";
  }
  if (listeningWrong > 0) {
    advice += "ğŸ§ è¯­æ„Ÿï¼šå¤šå¬å¸¦æ„Ÿæƒ…çš„åŸå£°ææ–™ï¼ˆè®¿è°ˆ/å¯¹è¯ï¼‰ï¼Œæ³¨æ„è¯­æ°”å’ŒçœŸå®æ„æ€çš„å·®åˆ«ã€‚\n";
  }
  if (!advice) {
    advice = "æœ¬æ¬¡è¡¨ç°å¾ˆå¥½ï¼Œå¯ä»¥é€æ­¥æŠŠé¢˜é‡åŠ åˆ° 8ï½10 é¢˜ä¸€ç»„ï¼Œå¹¶å¼€å§‹è®¡æ—¶æ¨¡æ‹Ÿå° Sectionã€‚";
  }
  adviceEl.textContent = advice;

  // è®°å½•å†å²
  saveHistory({
    time: new Date().toLocaleString(),
    mode: document.getElementById("modeSelect").value,
    total,
    correct,
    accuracy,
    elapsedSec,
    avgTime,
    grammarWrong,
    readingWrong,
    vocabWrong,
    listeningWrong
  });

  document.getElementById("analysisCard").style.display = "block";
  renderHistory();
}

// ========== å†å²è®°å½• ==========
const HISTORY_KEY = "toeic_800_trainer_history_v1";

function loadHistory() {
  try {
    const raw = localStorage.getItem(HISTORY_KEY);
    return raw ? JSON.parse(raw) : [];
  } catch {
    return [];
  }
}

function saveHistory(entry) {
  const list = loadHistory();
  list.unshift(entry);
  localStorage.setItem(HISTORY_KEY, JSON.stringify(list.slice(0, 50)));
}

function renderHistory() {
  const list = loadHistory();
  const box = document.getElementById("historyList");
  if (!list.length) {
    box.innerHTML = '<div style="font-size:13px;color:#94a3b8;">æš‚æ— è®°å½•ã€‚å®Œæˆä¸€æ¬¡è®­ç»ƒåä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œã€‚</div>';
    return;
  }
  box.innerHTML = "";
  list.forEach(item => {
    const div = document.createElement("div");
    div.className = "history-item";
    div.innerHTML = `
      <div><strong>${item.time}</strong></div>
      <div>
        <span class="pill">æ¨¡å¼ï¼š${item.mode}</span>
        <span class="pill">é¢˜æ•°ï¼š${item.total}</span>
        <span class="pill">æ­£ç¡®ç‡ï¼š${item.accuracy}%</span>
        <span class="pill">å¹³å‡ç”¨æ—¶ï¼š${item.avgTime}s</span>
      </div>
      <div style="margin-top:2px;">
        ${item.grammarWrong ? `<span class="pill">è¯­æ³•é”™ï¼š${item.grammarWrong}</span>` : ""}
        ${item.readingWrong ? `<span class="pill">é˜…è¯»é”™ï¼š${item.readingWrong}</span>` : ""}
        ${item.vocabWrong ? `<span class="pill">è¯æ±‡é”™ï¼š${item.vocabWrong}</span>` : ""}
        ${item.listeningWrong ? `<span class="pill">å¬åŠ›è¯­æ„Ÿé”™ï¼š${item.listeningWrong}</span>` : ""}
      </div>
    `;
    box.appendChild(div);
  });
}

// ========== äº‹ä»¶ç»‘å®š ==========
document.getElementById("startBtn").addEventListener("click", () => {
  const mode = document.getElementById("modeSelect").value;
  const count = parseInt(document.getElementById("countInput").value, 10) || 4;
  currentQuestions = pickQuestions(mode, count);
  if (!currentQuestions.length) {
    alert("å½“å‰æ¨¡å¼ä¸‹é¢˜åº“ä¸ºç©ºã€‚å¯ä»¥å…ˆä½¿ç”¨â€œç»¼åˆè®­ç»ƒâ€æ¨¡å¼ã€‚");
    return;
  }
  userAnswers = {};
  renderQuestions();
  startTimer();
});

document.getElementById("clearBtn").addEventListener("click", () => {
  if (!currentQuestions.length) return;
  currentQuestions.forEach(q => {
    const checked = document.querySelector(`input[name="q_${q.id}"]:checked`);
    if (checked) checked.checked = false;
    const aDiv = document.getElementById("analysis_" + q.id);
    if (aDiv) aDiv.style.display = "none";
  });
  document.getElementById("analysisCard").style.display = "none";
});

document.getElementById("questionsContainer").addEventListener("change", (e) => {
  if (e.target.name && e.target.name.startsWith("q_")) {
    // è‡ªåŠ¨è¯„åˆ†ï¼šæ‰€æœ‰é¢˜éƒ½ä½œç­”åè‡ªåŠ¨ç»“ç®—
    const allAnswered = currentQuestions.every(q =>
      document.querySelector(`input[name="q_${q.id}"]:checked`)
    );
    if (allAnswered) {
      grade();
    }
  }
});

document.getElementById("toggleHistory").addEventListener("click", () => {
  const box = document.getElementById("historyList");
  box.style.display = box.style.display === "none" ? "block" : "none";
});

// åˆå§‹æ¸²æŸ“å†å²
renderHistory();
</script>
</body>
</html>
